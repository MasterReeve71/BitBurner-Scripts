// This script receives four arguments: the names of four servers to hack.
// You *can* put the same server name in more than once. The script sees
// each argument as an individual target and doing so will not affect the
// script's execution. Each name given as an argument is a target.
// The script doesn't care what server is named as a target; it will try
// to weaken, grow, or hack each target it's been given as an argument.
//
// NOTE: You should have Root Access on all targets before running this.

export async function main(ns)
{ await ns.disableLog('ALL');
  await ns.enableLog('weaken');
  await ns.enableLog('grow');
  await ns.enableLog('hack');
  const host=[ns.args[0],ns.args[1],ns.args[2],ns.args[3]];
  const targetCash=[(ns.getServerMaxMoney(host[0]))*0.8,(ns.getServerMaxMoney(host[1]))*0.8,(ns.getServerMaxMoney(host[2]))*0.8,(ns.getServerMaxMoney(host[3]))*0.8];
  const targetSec=[(ns.getServerMinSecurityLevel(host[0])*1.2),(ns.getServerMinSecurityLevel(host[1])*1.2),(ns.getServerMinSecurityLevel(host[2])*1.2),(ns.getServerMinSecurityLevel(host[3])*1.2)];
  while (true)
  { for (var i=0; i<4; i++)
    { if (await ns.getServerSecurityLevel(host[i]) > targetSec[i])
        { await ns.weaken(host[i]);
        }
        else if (ns.getServerMoneyAvailable(host[i]) < targetCash[i])
        { await ns.grow(host[i]);
        }
        else
        { await ns.hack(host[i]);
        }
    }
    await ns.sleep(1000);
  }
}